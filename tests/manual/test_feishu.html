<!DOCTYPE html>
<html>
<head>
    <title>é£ä¹¦å›¾ç‰‡è°ƒè¯•</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        #raw { background: #1e1e1e; color: #d4d4d4; padding: 15px; overflow: auto; max-height: 400px; font-family: monospace; font-size: 11px; white-space: pre-wrap; word-break: break-all; }
        #preview { border: 2px solid #07c160; padding: 20px; margin: 10px 0; min-height: 200px; }
        .section { margin: 20px 0; }
        h3 { color: #333; }
    </style>
</head>
<body>
    <h1>ğŸ–¼ï¸ é£ä¹¦æ–‡æ¡£å›¾ç‰‡è°ƒè¯•å·¥å…·</h1>
    <p>ä»é£ä¹¦æ–‡æ¡£å¤åˆ¶å†…å®¹ï¼ˆå¸¦å›¾ç‰‡ï¼‰ï¼Œç„¶å <strong>æŒ‰ Ctrl+V ç²˜è´´åˆ°é¡µé¢ä»»æ„ä½ç½®</strong></p>
    
    <div class="section">
        <h3>åŸå§‹ HTMLï¼š</h3>
        <div id="raw">ç­‰å¾…ç²˜è´´...</div>
    </div>
    
    <div class="section">
        <h3>æ¸²æŸ“é¢„è§ˆï¼š</h3>
        <div id="preview">ç­‰å¾…ç²˜è´´...</div>
    </div>
    
    <script>
        const rawDiv = document.getElementById('raw');
        const previewDiv = document.getElementById('preview');
        
        document.addEventListener('paste', function(e) {
            e.preventDefault();
            
            const clipboardData = e.clipboardData;
            const html = clipboardData.getData('text/html');
            
            // æ˜¾ç¤ºåŸå§‹ HTML
            rawDiv.textContent = html || 'ï¼ˆæ—  HTML å†…å®¹ï¼‰';
            
            // æ¸²æŸ“é¢„è§ˆ
            if (html) {
                previewDiv.innerHTML = html;
                
                // æ£€æŸ¥æ‰€æœ‰å›¾ç‰‡å½¢å¼
                setTimeout(() => {
                    analyzeImages(previewDiv, html);
                }, 100);
            }
        });
        
        function analyzeImages(container, rawHtml) {
            let report = '\n\n=== å›¾ç‰‡åˆ†ææŠ¥å‘Š ===\n';
            
            // 1. æ£€æŸ¥ img æ ‡ç­¾
            const imgs = container.querySelectorAll('img');
            report += `1. <img> æ ‡ç­¾æ•°é‡: ${imgs.length}\n`;
            imgs.forEach((img, i) => {
                report += `   [${i}] src: ${img.src.substring(0, 80)}...\n`;
            });
            
            // 2. æ£€æŸ¥ background-image
            const allElements = container.querySelectorAll('*');
            let bgCount = 0;
            allElements.forEach((el, i) => {
                const style = window.getComputedStyle(el);
                const bg = style.backgroundImage;
                if (bg && bg !== 'none') {
                    bgCount++;
                    report += `   [bg-${bgCount}] ${el.tagName}: ${bg.substring(0, 80)}...\n`;
                }
            });
            report += `2. background-image æ•°é‡: ${bgCount}\n`;
            
            // 3. æ£€æŸ¥ç©º divï¼ˆå¯èƒ½æ˜¯å›¾ç‰‡å ä½ï¼‰
            const emptyDivs = container.querySelectorAll('div:empty');
            report += `3. ç©º div æ•°é‡: ${emptyDivs.length}\n`;
            
            // 4. æ£€æŸ¥åŸå§‹ HTML ä¸­çš„å›¾ç‰‡ç›¸å…³å­—ç¬¦ä¸²
            const hasBase64 = rawHtml.includes('data:image');
            const hasHttpImg = rawHtml.match(/https?:\/\/[^"'>\s]+\.(jpg|jpeg|png|gif|webp)/i);
            report += `4. åŒ…å« base64: ${hasBase64}\n`;
            report += `5. åŒ…å« http å›¾ç‰‡: ${hasHttpImg ? hasHttpImg[0] : 'å¦'}\n`;
            
            rawDiv.textContent += report;
        }
    </script>
</body>
</html>
